<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="python spider," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Mac OS X El Capitan 下安装 Scrapy$ pip install scrapy安装出错: OSError: [Errno 1] Operation not permitted1234567891011121314151617181920212223242526272829The directory &amp;apos;/Users/aiyouyou/Library/Caches/pi">
<meta property="og:type" content="article">
<meta property="og:title" content="Mac OS X El Capitan 下安装 Scrapy">
<meta property="og:url" content="http://cheenbee.github.io/2016/10/10/Mac-OS-X-El-Capitan-下安装-Scrapy/index.html">
<meta property="og:site_name" content="Winder">
<meta property="og:description" content="Mac OS X El Capitan 下安装 Scrapy$ pip install scrapy安装出错: OSError: [Errno 1] Operation not permitted1234567891011121314151617181920212223242526272829The directory &amp;apos;/Users/aiyouyou/Library/Caches/pi">
<meta property="og:image" content="http://obr2ozlb6.bkt.clouddn.com/14760941648778.jpg">
<meta property="og:image" content="http://obr2ozlb6.bkt.clouddn.com/14761484635545.jpg">
<meta property="og:image" content="http://obr2ozlb6.bkt.clouddn.com/14761484288737.jpg">
<meta property="og:updated_time" content="2016-10-11T02:39:10.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mac OS X El Capitan 下安装 Scrapy">
<meta name="twitter:description" content="Mac OS X El Capitan 下安装 Scrapy$ pip install scrapy安装出错: OSError: [Errno 1] Operation not permitted1234567891011121314151617181920212223242526272829The directory &amp;apos;/Users/aiyouyou/Library/Caches/pi">
<meta name="twitter:image" content="http://obr2ozlb6.bkt.clouddn.com/14760941648778.jpg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://cheenbee.github.io/2016/10/10/Mac-OS-X-El-Capitan-下安装-Scrapy/"/>

  <title> Mac OS X El Capitan 下安装 Scrapy | Winder </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Winder</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">好奇 + 思考</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Mac OS X El Capitan 下安装 Scrapy
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-10T17:00:00+08:00" content="2016-10-10">
              2016-10-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="Mac-OS-X-El-Capitan-下安装-Scrapy"><a href="#Mac-OS-X-El-Capitan-下安装-Scrapy" class="headerlink" title="Mac OS X El Capitan 下安装 Scrapy"></a>Mac OS X El Capitan 下安装 Scrapy</h3><h5 id="pip-install-scrapy"><a href="#pip-install-scrapy" class="headerlink" title="$ pip install scrapy"></a><code>$ pip install scrapy</code></h5><h5 id="安装出错-OSError-Errno-1-Operation-not-permitted"><a href="#安装出错-OSError-Errno-1-Operation-not-permitted" class="headerlink" title="安装出错: OSError: [Errno 1] Operation not permitted"></a>安装出错: OSError: [Errno 1] Operation not permitted</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">The directory &apos;/Users/aiyouyou/Library/Caches/pip/http&apos; or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&apos;s -H flag.</div><div class="line">The directory &apos;/Users/aiyouyou/Library/Caches/pip&apos; or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&apos;s -H flag.</div><div class="line">Collecting scrapy</div><div class="line">  Downloading Scrapy-1.2.0-py2.py3-none-any.whl (294kB)</div><div class="line">    100% |████████████████████████████████| 296kB 40kB/s </div><div class="line">Collecting service-identity (from scrapy)</div><div class="line">  Downloading service_identity-16.0.0-py2.py3-none-any.whl</div><div class="line">Collecting Twisted&gt;=10.0.0 (from scrapy)</div><div class="line">Collecting lxml (from scrapy)</div><div class="line">Collecting parsel&gt;=0.9.3 (from scrapy)</div><div class="line">  Downloading parsel-1.0.3-py2.py3-none-any.whl</div><div class="line">Collecting cssselect&gt;=0.9 (from scrapy)</div><div class="line">  Downloading cssselect-0.9.2-py2.py3-none-any.whl</div><div class="line">Collecting PyDispatcher&gt;=2.0.5 (from scrapy)</div><div class="line">Collecting w3lib&gt;=1.15.0 (from scrapy)</div><div class="line">  Downloading w3lib-1.15.0-py2.py3-none-any.whl</div><div class="line">Collecting queuelib (from scrapy)</div><div class="line">  Downloading queuelib-1.4.2-py2.py3-none-any.whl</div><div class="line">Collecting six&gt;=1.5.2 (from scrapy)</div><div class="line">  Downloading six-1.10.0-py2.py3-none-any.whl</div><div class="line">Requirement already satisfied (use --upgrade to upgrade): pyOpenSSL in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python (from scrapy)</div><div class="line">Collecting pyasn1 (from service-identity-&gt;scrapy)</div><div class="line">  Downloading pyasn1-0.1.9-py2.py3-none-any.whl</div><div class="line">Collecting pyasn1-modules (from service-identity-&gt;scrapy)</div><div class="line">  Downloading pyasn1_modules-0.0.8-py2.py3-none-any.whl</div><div class="line">Collecting attrs (from service-identity-&gt;scrapy)</div><div class="line">  Downloading attrs-16.2.0-py2.py3-none-any.whl</div><div class="line">Requirement already satisfied (use --upgrade to upgrade): zope.interface&gt;=3.6.0 in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python (from Twisted&gt;=10.0.0-&gt;scrapy)</div><div class="line">Requirement already satisfied (use --upgrade to upgrade): setuptools in /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python (from zope.interface&gt;=3.6.0-&gt;Twisted&gt;=10.0.0-&gt;scrapy)</div></pre></td></tr></table></figure>
<p><img src="http://obr2ozlb6.bkt.clouddn.com/14760941648778.jpg" alt=""></p>
<h5 id="原因"><a href="#原因" class="headerlink" title="原因:"></a>原因:</h5><p> “OSError: [Errno 1] Operation not permitted” when installing Scrapy in OSX 10.11 (El Capitan) (System Integrity Protection).<br>  This is because OS X El Capitan ships with six 1.4.1 installed already and when it attempts to uninstall it (because awscli depends on botocore, botocore depends on python-dateutil, and python-dateutil depends on six &gt;= 1.5) it doesn’t have permission to do so because System Integrity Protection doesn’t allow even root to modify those directories.<br>  Ideally, pip should just skip uninstalling those items since they aren’t installed to site-packages they are installed to a special Apple directory. However, even if pip skips uninstalling those items and installs six into site-packages we’ll hit another bug where Apple puts their pre-installed stuff earlier in the sys.path than site-packages. I’ve talked to Apple about this and I’m not sure if they’re going to do anything about it or not.</p>
<p>大致意思是: OSX EI Capitan 内置了一个叫做 <a href="https://support.apple.com/en-us/HT204899" target="_blank" rel="external">系统健全保护</a> 的保护机制，OSX EI Capitan系统已经安装了six 1.4.1，任何用户（包括root）都没有权限卸载它,而使用 pip 安装 scrapy 的时候,需要卸载系统内置的 six, 然后重新安装,因此出错</p>
<h5 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法:"></a>解决方法:</h5><pre><code>第一种方法: 选择忽略 OS X El Capitan 系统已经安装的 six          
$ sudo pip install scrapy --ignore-installed six

第二种方法: 关闭苹果的 SIP (System Integrity Protection)
    1. 重启 Mac，按住 Command+R 键直到 Apple logo 出现，进入 Recovery Mode
    2. 顶部导航栏，点击 Utilities &gt; Terminal
    3. 在 Terminal 中输入 csrutil disable，之后回车
    4. 重启 Mac
    5. 重启进入MAC之后再次csrutil status 
    6. 这时候系统会提示System Integrity Protection status: disabled.说明 SIP 功能已经被成功关闭
</code></pre><h5 id="查看是否安装成功"><a href="#查看是否安装成功" class="headerlink" title="查看是否安装成功"></a>查看是否安装成功</h5><p>输入命令: <code>$ scrapy</code> 报错: ImportError: cannot import name xmlrpc_client<br><img src="http://obr2ozlb6.bkt.clouddn.com/14761484635545.jpg" alt="">    </p>
<ul>
<li><p>如果你已经关闭了苹果的 SIP ,可以使用命令删除系统内置的 six ,再次重新安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo rm -rf /Library/Python/2.7/site-packages/six*</div><div class="line">$ sudo rm -rf /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/six*</div><div class="line">$ sudo pip install six</div></pre></td></tr></table></figure>
</li>
<li><p>如果你没有关闭 SIP ,而是选择忽略系统内置的 six 方式安装 scrapy,请使用如下方式升级安装 six<br><code>$ sudo easy_install --upgrade six</code></p>
</li>
<li><p>再次查看 scrapy ,显示使用方法,安装成功<br><img src="http://obr2ozlb6.bkt.clouddn.com/14761484288737.jpg" alt=""></p>
<h5 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h5><p>  <a href="https://github.com/pypa/pip/issues/3165" target="_blank" rel="external">Six issue when installing package</a><br>  <a href="http://www.jianshu.com/p/a03aab073a35" target="_blank" rel="external">史上最完全Mac安装Scrapy指南</a><br>  <a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew macOS 不可或缺的套件管理器</a><br>  <a href="http://www.zeython.com/ei_capitan_scrapy.html" target="_blank" rel="external">解决EI Capitan安装爬虫Scrapy问题</a><br>  <a href="http://stackoverflow.com/search?q=ImportError%3A+cannot+import+name+xmlrpc_client" target="_blank" rel="external">ImportError: cannot import name xmlrpc_client</a></p>
</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/python-spider/" rel="tag">#python spider</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/30/pod-search-XXX-仓库版本低于-Github-仓库版本/" rel="next" title="pod search XXX 仓库版本低于 Github 仓库版本">
                <i class="fa fa-chevron-left"></i> pod search XXX 仓库版本低于 Github 仓库版本
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="陈老湿" />
          <p class="site-author-name" itemprop="name">陈老湿</p>
          <p class="site-description motion-element" itemprop="description">一探究竟</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">6</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/cheenbee" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/GotherCB" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mac-OS-X-El-Capitan-下安装-Scrapy"><span class="nav-number">1.</span> <span class="nav-text">Mac OS X El Capitan 下安装 Scrapy</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#pip-install-scrapy"><span class="nav-number">1.0.1.</span> <span class="nav-text">$ pip install scrapy</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#安装出错-OSError-Errno-1-Operation-not-permitted"><span class="nav-number">1.0.2.</span> <span class="nav-text">安装出错: OSError: [Errno 1] Operation not permitted</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#原因"><span class="nav-number">1.0.3.</span> <span class="nav-text">原因:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#解决方法"><span class="nav-number">1.0.4.</span> <span class="nav-text">解决方法:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看是否安装成功"><span class="nav-number">1.0.5.</span> <span class="nav-text">查看是否安装成功</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#参考资料"><span class="nav-number">1.0.6.</span> <span class="nav-text">参考资料</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">陈老湿</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
